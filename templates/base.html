{% load static %}
{% load staticfiles %}
{% load hijack_tags %}
{% load account %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{% block head_title %}{% endblock head_title %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css"
          integrity="sha256-/Z28yXtfBv/6/alw+yZuODgTbKZm86IKbPE/5kjO/xY=" crossorigin="anonymous"/>
    <link rel="stylesheet" type="text/css" href="{% static 'hijack/hijack-styles.css' %}"/>
    {#    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"#}
    {#          integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN">#}


    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
            integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.js"
            integrity="sha256-Bhi6GMQ/72uYZcJXCJ2LToOIcN3+Cx47AZnq/Bw1f7A=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            $('.dropdown').dropdown();
            $('.message .close').on('click', function () {
                $(this).closest('.message').transition('fade');
            });
        })
    </script>

    {% block head_extra %}{% endblock head_extra %}
</head>

<body>
<div class="ui main borderless menu">
    <div class="ui text container">
        <div class="header item">
            <img class="logo" src="{% static 'righinetwork/r.jpg' %}">
            Righi-Network
        </div>
        {% if user.is_authenticated %}
            <a href="{{ BASE_DIR }}/" class="active item">Home</a>
            {#        <a href="#" class="item">Articles</a>#}

            <div class="ui right secondary menu">
                {% if user.is_superuser %}
                    <a href="{{ BASE_DIR }}/admin/" class="ui item">Admin</a>
                {% endif %}
                {% if user.studente.is_rapistituto or user.is_superuser %}
                    <a href="{% url "accounts:gestione" %}" class="ui item">Gestione</a>
                {% endif %}

                <a href="#" class="ui right floated dropdown item" id="user-dropdown">
                    {{ user.first_name }} <i class="dropdown icon"></i>
                    <div class="menu">
                        <div class="header">Impostazioni</div>
                        <div class="item" href="{% url 'account_email' %}">E-mail</div>
                        <div class="item" href="{% url 'account_reset_password' %}">Password</div>
                        <div class="divider"></div>
                        <div class="item" href="{% url 'account_logout' %}">Esci</div>
                    </div>
                </a>
            </div>
        {% endif %}
    </div>
</div>

<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '1263247960440617',
            cookie: true,
            xfbml: true,
            version: 'v2.8'
        });
        FB.AppEvents.logPageView();
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

{% hijack_notification %}
{% if request|is_hijacked %}
{% endif %}

<div class="ui container">

    {% if messages %}
        {% for message in messages %}
            <div class="ui green floating message">
                <i class="close icon"></i>
                <div class="header">Messaggio</div>
                <span>{{ message }}</span>
            </div>
        {% endfor %}
    {% endif %}

    {% block content %}
    {% endblock content %}

    {% block extra_body %}
    {% endblock extra_body %}
</div>

<footer>

</footer>

</body>
</html>
